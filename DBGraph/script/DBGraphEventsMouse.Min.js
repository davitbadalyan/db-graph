function InitMouseEvents(){window.addEventListener("mousemove",function(t){windowMouseMove(CNV_waterfallZoom,CNV_ctx_waterfallZoom,t)},!1),window.addEventListener("mouseup",function(t){windowMouseUp(CNV_waterfallZoom,CNV_ctx_waterfallZoom,t)},!1),window.addEventListener("resize",function(t){onWindowResize(t)},!1),CNV_waterfallZoom.addEventListener("mousedown",function(t){mouseDownWtr(CNV_waterfallZoom,CNV_ctx_waterfallZoom,t)},!1),CNV_waterfallZoom.addEventListener("mousemove",function(t){mouseMoveWtr(CNV_waterfallZoom,CNV_ctx_waterfallZoom,t)},!1),CNV_waterfallZoom.addEventListener("mouseup",function(t){mouseUpWtr(CNV_waterfallZoom,CNV_ctx_waterfallZoom,t)},!1),CNV_waterfallZoom.addEventListener("mouseout",function(t){mouseOutWtr(CNV_waterfallZoom,CNV_ctx_waterfallZoom,t)},!1),CNV_waterfallZoom.addEventListener("mouseover",function(t){mouseOverWtr(CNV_waterfallZoom,CNV_ctx_waterfallZoom,t)},!1),wtrZoomOutButton.addEventListener("mouseup",function(t){ZoomOff(t)},!1)}function windowMouseMove(t,e,o){mouseOutInZoomWtr&&(mouseWtrReleaseOutX=o.pageX-WtrPositionX,mouseWtrReleaseOutY=o.pageY-WtrPositionY,o.pageX-WtrPositionX>wtrWidthSmall?mouseWtrReleaseOutX=wtrWidthSmall:o.pageX-WtrPositionX<0&&(mouseWtrReleaseOutX=0),o.pageY-WtrPositionY>wtrHeightSmall?mouseWtrReleaseOutY=wtrHeightSmall:o.pageY-WtrPositionY<0&&(mouseWtrReleaseOutY=0),wtrDrawZoomArea(t,e,mouseWtrReleaseOutX-mouseClickWtrX1,mouseWtrReleaseOutY-mouseClickWtrY1))}function windowMouseUp(t,e,o){0==o.button&&mouseOutInZoomWtr&&(mouseOutInZoomWtr=!1,mouseClickedWtr=!1,t.style.cursor="default",document.body.style.cursor="default",e.clearRect(0,0,wtrWidthSmall,wtrHeightSmall),mouseClickWtrX2=mouseWtrReleaseOutX,mouseClickWtrY2=mouseWtrReleaseOutY,defineZoomArea(),t.style.cursor="default",document.body.style.cursor="default",CNV_ctx_waterfall.clearRect(0,0,wtrWidthSmall,wtrHeightSmall),CNV_ctx_waterfall.drawImage(CNV_waterfallOrig,wtrDisplayOriginX,wtrDisplayOriginY,wtrDisplayWidth,wtrDisplayHeight-1,0,0,wtrWidthSmall,wtrHeightSmall),Zoom=!0)}function mouseDownWtr(t,e,o){0==o.button&&(mouseClickedWtr=!0,t.style.cursor="zoom-in",document.body.style.cursor="zoom-in",mouseClickWtrX1=o.pageX-WtrPositionX,mouseClickWtrY1=o.pageY-WtrPositionY)}function mouseUpWtr(t,e,o){0==o.button&&mouseClickedWtr&&(mouseClickedWtr=!1,mouseClickWtrX2=o.pageX-WtrPositionX,mouseClickWtrY2=o.pageY-WtrPositionY,t.style.cursor="default",document.body.style.cursor="default",e.clearRect(0,0,wtrWidthSmall,wtrHeightSmall),defineZoomArea(),CNV_ctx_waterfall.clearRect(0,0,wtrWidthSmall,wtrHeightSmall),CNV_ctx_waterfall.drawImage(CNV_waterfallOrig,wtrDisplayOriginX,wtrDisplayOriginY,wtrDisplayWidth,wtrDisplayHeight-1,0,0,wtrWidthSmall,wtrHeightSmall),Zoom=!0)}function mouseMoveWtr(t,e,o){mouseClickedWtr&&wtrDrawZoomArea(t,e,o.pageX-WtrPositionX-mouseClickWtrX1,o.pageY-WtrPositionY-mouseClickWtrY1)}function mouseOutWtr(t,e,o){mouseClickedWtr&&(mouseOutInZoomWtr=!0)}function mouseOverWtr(t,e,o){mouseClickedWtr&&(mouseOutInZoomWtr=!1)}function ZoomOff(t){wtrDisplayOriginX=0,wtrDisplayOriginY=0,wtrDisplayWidth=wtrWidthBig,wtrDisplayHeight=wtrHeightBig,CNV_ctx_waterfall.clearRect(0,0,wtrWidthSmall,wtrHeightSmall),CNV_ctx_waterfall.drawImage(CNV_waterfallOrig,wtrDisplayOriginX,wtrDisplayOriginY,wtrDisplayWidth,wtrDisplayHeight-1,0,0,wtrWidthSmall,wtrHeightSmall),Zoom=!1}function getOffset(t){var e=0,o=0;do isNaN(t.offsetLeft)||(e+=t.offsetLeft),isNaN(t.offsetTop)||(o+=t.offsetTop);while(t=t.offsetParent);return{left:e,top:o}}function wtrDrawZoomArea(t,e,o,r){t.getContext&&(e.clearRect(0,0,wtrWidthSmall,wtrHeightSmall),e.globalAlpha=.2,e.fillStyle="white",e.fillRect(mouseClickWtrX1,mouseClickWtrY1,o,r),e.strokeStyle="Red",e.stroke())}function defineZoomArea(){var t=Math.min(mouseClickWtrX1,mouseClickWtrX2),e=Math.min(mouseClickWtrY1,mouseClickWtrY2),o=Math.abs(mouseClickWtrX2-mouseClickWtrX1),r=Math.abs(mouseClickWtrY2-mouseClickWtrY1),l=wtrDisplayWidth/wtrWidthSmall,i=wtrDisplayHeight/wtrHeightSmall,a=wtrDisplayOriginX+l*t,s=wtrDisplayOriginY+i*e,u=l*o,m=i*r;a>=0&&s>=0&&u>0&&m>0&&(wtrDisplayOriginX+=l*t,wtrDisplayOriginY+=i*e,wtrDisplayWidth=l*o,wtrDisplayHeight=i*r),document.getElementById("XVal2").value=wtrDisplayOriginX,document.getElementById("YVal2").value=wtrDisplayOriginY,document.getElementById("XVal3").value=wtrDisplayWidth,document.getElementById("YVal3").value=wtrDisplayHeight}function onWindowResize(){getWtrPosition()}var mouseClickedWtr=!1,mouseOutInZoomWtr=!1,mouseClickWtrX1=0,mouseClickWtrY1=0,mouseClickWtrX2=0,mouseClickWtrY2=0,mouseWtrReleaseOutX=0,mouseWtrReleaseOutY=0;